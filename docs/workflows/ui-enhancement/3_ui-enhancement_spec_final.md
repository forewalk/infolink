# UI 개선 (i18n, 다크모드, 게시판) 기능 기획서 (최종)

**작성일:** 2026-01-27
**최종 승인일:** 2026-01-27
**작성자:** 김장훈
**검토자:** Claude AI
**버전:** 2.0
**상태:** ✅ 확정

---

## 📌 변경 이력 요약

### 초안 대비 주요 변경사항
1. 게시판 접근 권한 명확화: 비회원도 조회 가능, 글쓰기만 로그인 필요
2. 페이지네이션 → **무한스크롤**로 변경, 최신순 정렬
3. 게시글 내용 최대 10,000자 제한 + UI 카운터 표시 ('0/10000')
4. 회원가입 기능은 별도 워크플로우로 분리 (작업 리스트에 기록)

### Claude 검토 반영 사항
- 반영한 제안:
  - XSS 방지를 위한 내용 sanitization
  - 게시글 내용 최대 길이 제한 (10,000자)
  - i18n 번역 파일 기능별 분리 구조
  - 데이터베이스 인덱스 전략 (user_id, created_at)
- 반영하지 않은 제안 및 이유:
  - category_id 컬럼 예약: 향후 필요 시 추가 (현재는 불필요)
  - 페이지네이션: 무한스크롤로 대체

---

## 1. 개요

### 1.1 목적
Infolink 애플리케이션의 사용자 경험을 개선하기 위해 다국어 지원(i18n), 다크모드, 게시판 기능을 추가한다.

### 1.2 배경
- 글로벌 사용자를 위한 한글/영어 지원 필요
- 사용자 눈의 피로도 감소를 위한 다크모드 지원
- 사용자 간 커뮤니케이션을 위한 게시판 기능 필요

### 1.3 범위

**포함:**
- i18n: 한글/영어 언어 전환 기능
- 다크모드: 라이트/다크 테마 전환
- 게시판: 게시글 CRUD, 메인페이지 게시판 버튼, 무한스크롤

**제외:**
- 다른 언어 지원 (일본어, 중국어 등)
- 댓글 기능 (향후 추가 예정)
- 게시판 첨부파일 기능
- 회원가입 기능 (별도 워크플로우)

---

## 2. 요구사항

### 2.1 기능 요구사항

#### 필수 기능 (Must Have)

**i18n:**
1. 한글/영어 언어 전환 버튼 (헤더)
2. 모든 UI 텍스트 다국어 지원
3. 언어 설정 localStorage 저장 (새로고침 유지)
4. 번역 파일 기능별 분리 (common.json, auth.json, board.json)

**다크모드:**
1. 라이트/다크 테마 전환 토글 (헤더)
2. 시스템 설정 감지 (prefers-color-scheme)
3. 테마 설정 localStorage 저장
4. 피그마 디자인 기반 색상 팔레트

**게시판:**
1. 게시글 목록 조회 (무한스크롤, 최신순)
2. 게시글 작성 (제목 최대 200자, 내용 최대 10,000자)
3. 게시글 상세 보기 + 조회수 증가
4. 게시글 수정/삭제 (작성자만)
5. 메인페이지 하단 게시판 버튼
6. 글자수 카운터 UI ('0/10000')

#### 선택 기능 (Should Have)
1. 언어/테마 전환 애니메이션
2. 게시글 검색 (제목 기준)

#### 향후 고려사항 (Nice to Have)
1. 추가 언어 지원
2. 댓글 기능
3. 게시판 카테고리
4. 회원가입 기능 (별도 워크플로우 예정)

### 2.2 비기능 요구사항

#### 성능
- 언어/테마 전환: 즉시 (깜빡임 없음, FOUC 방지)
- 게시판 목록 로딩: 500ms 이내
- 무한스크롤 배치 크기: 20개

#### 보안
- 인증/인가: 게시글 작성/수정/삭제는 JWT 인증 필요
- 접근 제어: 
  - 게시판 조회: 모든 사용자 (비회원 포함)
  - 게시글 작성: 로그인 사용자만
  - 게시글 수정/삭제: 작성자 본인만
- XSS 방지: 게시글 내용 HTML 태그 escape

#### 확장성
- 무한스크롤 cursor 기반 페이징 (offset 대신 id 기준)

---

## 3. 사용자 시나리오 (확정)

### 3.1 주요 사용자
- 로그인 사용자: 게시판 모든 기능 사용 가능
- 비회원: 게시판 조회만 가능 (글쓰기 시 로그인 페이지로 이동)

### 3.2 사용 시나리오

#### 시나리오 1: 언어 변경
**사전 조건:** 사용자가 앱에 접속함

**실행 단계:**
1. 헤더의 언어 전환 버튼 클릭
2. 드롭다운에서 원하는 언어 선택 (한글/English)

**기대 결과:**
- 모든 UI 텍스트가 선택한 언어로 즉시 변경
- 새로고침 후에도 설정 유지

---

#### 시나리오 2: 다크모드 전환
**사전 조건:** 사용자가 앱에 접속함

**실행 단계:**
1. 헤더의 테마 토글 버튼 클릭 (🌙/☀️)

**기대 결과:**
- 화면이 다크/라이트 테마로 즉시 전환 (깜빡임 없음)
- 새로고침 후에도 설정 유지

---

#### 시나리오 3: 게시판 조회 (비회원)
**사전 조건:** 비로그인 상태

**실행 단계:**
1. 메인페이지 하단 "게시판" 버튼 클릭
2. 게시판 페이지로 이동
3. 게시글 목록 확인, 스크롤하여 추가 로딩
4. 게시글 클릭하여 상세 보기

**기대 결과:**
- 게시글 목록/상세 조회 가능
- "글쓰기" 버튼 클릭 시 로그인 페이지로 이동

---

#### 시나리오 4: 게시글 작성 (로그인 사용자)
**사전 조건:** 로그인한 사용자

**실행 단계:**
1. 게시판 페이지에서 "글쓰기" 버튼 클릭
2. 제목 입력 (최대 200자)
3. 내용 입력 (글자수 카운터로 확인, 최대 10,000자)
4. "저장" 버튼 클릭

**기대 결과:**
- 게시글이 저장되고 목록 최상단에 표시

**예외 상황:**
- 제목/내용 미입력: 에러 메시지 표시
- 글자수 초과: 입력 제한 + 경고

---

## 4. 데이터 요구사항 (확정)

### 4.1 데이터 모델 (boards 테이블)

| 컬럼명 | 타입 | 필수 | 기본값 | 설명 |
|--------|------|------|--------|------|
| id | BIGINT | Y | auto | PK |
| user_id | BIGINT | Y | - | 작성자 FK (users.id) |
| title | VARCHAR(200) | Y | - | 게시글 제목 |
| content | TEXT | Y | - | 게시글 내용 (최대 10,000자) |
| view_count | INTEGER | Y | 0 | 조회수 |
| created_at | TIMESTAMP | Y | now() | 작성일시 |
| updated_at | TIMESTAMP | Y | now() | 수정일시 |
| deleted_at | TIMESTAMP | N | NULL | 삭제일시 (soft delete) |

**인덱스:**
- idx_boards_user_id: user_id (내 글 조회)
- idx_boards_created_at: created_at DESC (최신순 정렬, 무한스크롤)

### 4.2 데이터 작업
- CREATE: 로그인 사용자가 게시글 작성
- READ: 모든 사용자 (deleted_at IS NULL 조건)
- UPDATE: 작성자 본인만 수정 가능
- DELETE: 작성자 본인만 삭제 가능 (soft delete)

---

## 5. API 명세 (확정)

### 5.1 게시판 API

#### API 1: 게시글 목록 조회 (무한스크롤)
- **Method:** GET
- **Path:** `/api/v1/boards`
- **인증:** Optional (비회원도 가능)
- **설명:** 게시글 목록을 cursor 기반으로 조회

**요청 파라미터:**
```
?cursor={last_id}&limit=20
```

**성공 응답 (200):**
```json
{
  "items": [
    {
      "id": 1,
      "title": "제목",
      "content": "내용 미리보기...",
      "view_count": 10,
      "author_name": "작성자",
      "created_at": "2026-01-27T10:00:00Z"
    }
  ],
  "next_cursor": 21,
  "has_more": true
}
```

---

#### API 2: 게시글 상세 조회
- **Method:** GET
- **Path:** `/api/v1/boards/{id}`
- **인증:** Optional
- **설명:** 게시글 상세 조회 + 조회수 증가

**성공 응답 (200):**
```json
{
  "id": 1,
  "user_id": 1,
  "title": "제목",
  "content": "전체 내용",
  "view_count": 11,
  "author_name": "작성자",
  "is_author": false,
  "created_at": "2026-01-27T10:00:00Z",
  "updated_at": "2026-01-27T10:00:00Z"
}
```

---

#### API 3: 게시글 작성
- **Method:** POST
- **Path:** `/api/v1/boards`
- **인증:** Required

**요청:**
```json
{
  "title": "제목 (최대 200자)",
  "content": "내용 (최대 10,000자)"
}
```

**성공 응답 (201):**
```json
{
  "id": 1,
  "title": "제목",
  "content": "내용",
  "created_at": "2026-01-27T10:00:00Z"
}
```

**에러 응답:**
- 401: Unauthorized (로그인 필요)
- 422: Validation Error (글자수 초과 등)

---

#### API 4: 게시글 수정
- **Method:** PUT
- **Path:** `/api/v1/boards/{id}`
- **인증:** Required (작성자만)

**요청:**
```json
{
  "title": "수정된 제목",
  "content": "수정된 내용"
}
```

**에러 응답:**
- 401: Unauthorized
- 403: Forbidden (작성자가 아님)
- 404: Not Found

---

#### API 5: 게시글 삭제
- **Method:** DELETE
- **Path:** `/api/v1/boards/{id}`
- **인증:** Required (작성자만)

**성공 응답 (204):** No Content

**에러 응답:**
- 401: Unauthorized
- 403: Forbidden
- 404: Not Found

---

## 6. 제약사항 및 고려사항 (확정)

### 6.1 기술적 제약사항
- i18n: react-i18next 라이브러리 사용
- 다크모드: CSS 변수 기반, 피그마 디자인 색상 팔레트 적용
- FOUC 방지: 초기 로딩 시 localStorage 값 먼저 적용

### 6.2 외부 의존성
- react-i18next, i18next (프론트엔드)
- i18next-browser-languagedetector (선택)

### 6.3 보안 요구사항
- 게시글 내용 XSS 방지 (HTML escape)
- JWT 토큰 검증 (작성/수정/삭제 시)
- user_id 검증 (수정/삭제 시 작성자 확인)

---

## 7. 성공 기준 (확정)

### 7.1 완료 조건
- [ ] 한글/영어 전환 시 모든 UI 텍스트 변경됨
- [ ] 다크모드 전환 시 전체 테마 변경됨 (깜빡임 없음)
- [ ] 게시글 CRUD 정상 동작
- [ ] 무한스크롤 정상 동작 (최신순)
- [ ] 비회원 조회 가능, 글쓰기 시 로그인 유도
- [ ] 글자수 카운터 정상 표시

### 7.2 테스트 기준
- [ ] 백엔드 API 단위 테스트
- [ ] 프론트엔드 주요 기능 테스트

---

## 8. 개발 착수 승인

### 8.1 승인 정보
- 승인자: 김장훈
- 승인일: 2026-01-27
- 승인 조건: 기획서 내용 확정

### 8.2 다음 단계
✅ 4단계: 개발 계획서 작성 (`/create-dev-plan ui-enhancement`)

---

## 9. 부록

### 9.1 참고 자료
- Figma 디자인: `frontend/figma/board_button.svg`, `frontend/figma/board.svg`
- react-i18next 문서: https://react.i18next.com/

### 9.2 향후 작업 리스트
- [ ] 회원가입 기능 (별도 워크플로우)

---

## 10. i18n 번역 파일 구조

```
frontend/src/locales/
├── ko/
│   ├── common.json    # 공통 (버튼, 에러 메시지 등)
│   ├── auth.json      # 인증 관련
│   └── board.json     # 게시판 관련
└── en/
    ├── common.json
    ├── auth.json
    └── board.json
```

---

**문서 상태:** 확정 및 잠금
**다음 단계:** 개발 계획 수립 (`/create-dev-plan ui-enhancement`)
