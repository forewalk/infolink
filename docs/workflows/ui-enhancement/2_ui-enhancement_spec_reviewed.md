# UI 개선 (i18n, 다크모드, 게시판) 기능 기획서 검토 결과

**검토일:** 2026-01-27
**검토자:** Claude AI
**원본 기획서:** `1_ui-enhancement_spec.md`
**상태:** 검토 완료

---

## 📋 검토 요약

### 전체 평가
기획서가 체계적으로 잘 작성되어 있습니다. i18n, 다크모드, 게시판 3가지 기능의 요구사항이 명확하게 정의되어 있으며, 현재 FastAPI + React 아키텍처에서 구현 가능합니다. 다만 게시판 접근 권한에 대한 내용이 일부 상충되어 명확화가 필요합니다.

### 주요 발견사항
- ✅ 잘 작성된 부분:
  - 기능별 요구사항 분리 명확
  - API 엔드포인트 설계 적절
  - 데이터 모델 기본 구조 정의됨
  - 기존 레이어 패턴(Model → Schema → Repository → Service → Endpoint) 호환
- ⚠️ 개선 필요 부분:
  - 게시판 접근 권한 정책 불일치 (3.1 vs 2.2 보안 섹션)
  - 다크모드 구체적 색상 팔레트 미정의
  - 페이지네이션 기본값 미확정
- ❌ 누락된 부분:
  - i18n 번역 키 구조/관리 방안
  - 회원가입 기능 범위 결정

---

## 1. 요구사항 완전성 검토

### 1.1 기능 요구사항 분석

**명확성:**
- i18n: 명확함 (한글/영어 전환, localStorage 저장)
- 다크모드: 명확함 (시스템 설정 감지, 토글, 저장)
- 게시판: 대부분 명확함 (CRUD 정의됨)

**완전성:**
- i18n: 번역 파일 구조 정의 필요
- 다크모드: 색상 팔레트 정의 필요
- 게시판: 접근 권한 정책 확정 필요

**추가 필요 기능:**
- 언어 변경 시 날짜/시간 포맷 처리 방안

### 1.2 비기능 요구사항 분석

**성능 요구사항:**
- 현재 상태: 게시판 목록 500ms 이내 명시됨
- 제안 사항: 적절함

**보안 요구사항:**
- 현재 상태: JWT 인증, 작성자만 수정/삭제 명시
- 제안 사항: XSS 방지를 위한 게시글 내용 sanitization 추가 권장

**확장성 고려:**
- 현재 상태: 향후 댓글, 카테고리 언급
- 제안 사항: 게시판 테이블 설계 시 category_id 컬럼 예약 고려

---

## 2. 기술적 실현 가능성 평가

### 2.1 현재 시스템과의 호환성

**기존 아키텍처:**
- FastAPI + PostgreSQL + SQLAlchemy 환경에서 구현 가능: ✅
- 기존 레이어 구조와의 적합성: ✅ (BaseModel 상속, 기존 패턴 동일하게 적용)

**데이터베이스:**
- 스키마 변경 필요 사항: boards 테이블 신규 생성
- 마이그레이션 전략: Alembic revision 생성

**API 구조:**
- RESTful 원칙 준수: ✅ (/api/v1/boards)
- 버전 관리 고려: v1 prefix 사용 중

### 2.2 필요한 외부 의존성

**필수:**
- react-i18next, i18next (프론트엔드 i18n)

**선택:**
- i18next-browser-languagedetector (브라우저 언어 자동 감지)

### 2.3 예상되는 기술적 도전과제
1. 다크모드 전환 시 깜빡임 방지 (FOUC - Flash of Unstyled Content)
2. i18n 초기 로딩 시 번역 텍스트 표시 지연

---

## 3. 보안 및 성능 고려사항

### 3.1 보안 취약점 분석

**인증/인가:**
- 게시글 수정/삭제 시 user_id 검증 필수

**데이터 보호:**
- 게시글 내용에 대한 XSS 방지 필요

**입력 검증:**
- 제목 최대 200자, 내용 최대 길이 정의 필요

**권장 보안 조치:**
1. 게시글 작성 시 HTML 태그 escape 또는 허용 태그만 whitelist
2. 제목/내용 길이 서버 측 검증

### 3.2 성능 최적화 제안

**데이터베이스:**
- 인덱스 전략: user_id, created_at 인덱스 필요
- 쿼리 최적화: deleted_at IS NULL 조건 포함

**API 성능:**
- 캐싱 전략: 목록 캐싱 (변경 시 무효화)
- 페이지네이션: offset/limit 방식 적절

**예상 병목 지점:**
- 게시글 조회 시 조회수 증가 (동시성 고려)

---

## 4. 사용자 시나리오 검증

### 4.1 시나리오 완전성

**누락된 시나리오:**
1. 비로그인 사용자가 게시판 접근 시 흐름
2. 게시글 수정 중 다른 사용자가 삭제한 경우

**추가 필요 예외 상황:**
1. 게시글 작성 중 세션 만료
2. 존재하지 않는 게시글 ID 접근

### 4.2 엣지 케이스
1. 제목/내용이 공백만 있는 경우
2. 동시에 같은 게시글 수정 시도

---

## 5. 데이터 모델 검토

### 5.1 데이터베이스 설계 제안

**테이블 구조 초안:**
```sql
-- boards 테이블 (게시판)
CREATE TABLE boards (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL REFERENCES users(id),
    title VARCHAR(200) NOT NULL,
    content TEXT NOT NULL,
    view_count INTEGER NOT NULL DEFAULT 0,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    deleted_at TIMESTAMP NULL
);

-- 인덱스
CREATE INDEX idx_boards_user_id ON boards(user_id);
CREATE INDEX idx_boards_created_at ON boards(created_at DESC);
CREATE INDEX idx_boards_deleted_at ON boards(deleted_at) WHERE deleted_at IS NULL;
```

**관계 설계:**
- boards.user_id → users.id (N:1 관계)

**인덱스 전략:**
- user_id: 내 글 조회
- created_at DESC: 최신순 정렬
- partial index (deleted_at IS NULL): soft delete 필터링

### 5.2 Pydantic 스키마 제안
```python
# 게시판 스키마
class BoardBase(BaseModel):
    title: str = Field(..., min_length=1, max_length=200)
    content: str = Field(..., min_length=1)

class BoardCreate(BoardBase):
    pass

class BoardUpdate(BaseModel):
    title: Optional[str] = Field(None, min_length=1, max_length=200)
    content: Optional[str] = Field(None, min_length=1)

class BoardResponse(BoardBase):
    id: int
    user_id: int
    view_count: int
    created_at: datetime
    updated_at: datetime
    author_name: str  # JOIN으로 가져오거나 별도 조회

    model_config = {"from_attributes": True}
```

---

## 6. 명확화가 필요한 사항

### 6.1 질문 사항

1. **질문 1: 게시판 접근 권한**
   - 현재 기획서 내용: 
     - 3.1절: "비회원: 게시글 조회만 가능"
     - 2.2절: "게시판은 로그인 성공한 사용자만 접근 가능"
   - 명확화 필요 이유: 두 내용이 상충됨
   - 제안 사항:
     - 옵션 A: 로그인 사용자만 접근 (비회원 완전 차단)
     - 옵션 B: 비회원도 조회 가능, 작성만 로그인 필요

2. **질문 2: 회원가입 기능**
   - 현재 기획서 내용: 질문으로 제시됨 ("회원가입 기능은?")
   - 명확화 필요 이유: 이번 범위에 포함할지 결정 필요
   - 제안 사항:
     - 옵션 A: 이번 범위에 포함 (간단한 이메일/비밀번호 가입)
     - 옵션 B: 이번 범위에서 제외 (별도 워크플로우)

3. **질문 3: 페이지네이션 기본값**
   - 현재 기획서 내용: 질문으로 제시됨 (예: 20개)
   - 명확화 필요 이유: API 개발 시 기본값 필요
   - 제안 사항: 20개 권장 (일반적인 게시판 기준)

4. **질문 4: 다크모드 색상 팔레트**
   - 현재 기획서 내용: 미정의
   - 명확화 필요 이유: 디자인 일관성
   - 제안 사항: 기존 피그마 디자인 기반으로 결정 또는 기본 팔레트 사용

### 6.2 의사결정 필요 사항

1. **결정 사항 1: i18n 번역 파일 구조**
   - 옵션 A: 기능별 분리 (auth.json, board.json, common.json)
   - 옵션 B: 페이지별 분리 (login.json, products.json, board.json)
   - 권장 사항: 옵션 A (기능별 분리) - 재사용성 높음

2. **결정 사항 2: 게시글 내용 최대 길이**
   - 옵션 A: 무제한 (TEXT)
   - 옵션 B: 10,000자 제한
   - 권장 사항: 옵션 B - 악용 방지

---

## 7. 프로젝트 규칙 준수 검토

### 7.1 CLAUDE.md 규칙 적합성

**레이어 아키텍처:**
- Models → Schemas → Repositories → Services → Endpoints 구조 적용 가능: ✅

**데이터베이스 네이밍 컨벤션:**
- 테이블명: `boards` (snake_case, plural) ✅
- 컬럼명: snake_case, 명확한 의미 ✅
- 타임스탬프: created_at, updated_at, deleted_at 포함 ✅

**API 규칙:**
- `/api/v1` prefix 사용: ✅
- RESTful 네이밍: ✅

### 7.2 추가 고려사항
- 프론트엔드 경로 별칭(@components, @services 등) 활용 권장

---

## 8. 개선 제안 사항

### 8.1 우선순위 높음 (반드시 반영 필요)
1. 게시판 접근 권한 정책 확정 (상충 해결)
2. 게시글 내용 최대 길이 정의

### 8.2 우선순위 중간 (권장)
1. XSS 방지를 위한 내용 sanitization 명시
2. 조회수 증가 시 동시성 처리 방안 정의

### 8.3 우선순위 낮음 (선택)
1. 향후 카테고리 기능을 위한 category_id 컬럼 예약
2. 게시글 검색 기능 상세 정의 (검색 대상: 제목만? 내용도?)

---

## 9. 검토 체크리스트

### 완전성
- [x] 모든 필수 요구사항 명시됨
- [x] 비기능 요구사항 포함됨
- [ ] 예외 상황 고려됨 (일부 누락)
- [x] 성공 기준 명확함

### 명확성
- [ ] 요구사항이 모호하지 않음 (접근 권한 상충)
- [x] 용어 정의가 명확함
- [x] 사용자 시나리오가 구체적임

### 실현 가능성
- [x] 기술적으로 구현 가능함
- [x] 현재 아키텍처와 호환됨
- [x] 필요 리소스가 합리적임

### 보안 및 성능
- [x] 보안 고려사항 포함됨
- [x] 성능 요구사항 정의됨
- [x] 확장성 고려됨

---

## 10. 검토 질문에 대한 답변

> **작성 가이드:** 아래 질문들에 대한 답변을 작성하세요.

### 섹션 6.1의 질문들에 대한 답변

#### 질문 1: 게시판 접근 권한
**선택한 옵션:**
<!-- 옵션 A: 로그인 사용자만 / 옵션 B: 비회원도 조회 가능 -->
옵션 B: 비회원도 조회 가능, 작성만 로그인 필요

**선택 이유:**
글 작성을 시도할 경우, 권한을 체크하는 로직이 맞고 게시판은 누구나 접속 글 리드는 확인이 가능한 형태가 맞음

**구체적인 동작:**


---

#### 질문 2: 회원가입 기능 범위
**선택한 옵션:**
<!-- 옵션 A: 이번 범위에 포함 / 옵션 B: 별도 워크플로우 -->
회원가입의 경우 별도 워크플로우로 생성하되, 지금은 하지말고 해야할 작업 리스트에 포함만 시키자.

**선택 이유:**
협업하는 단계에 다른 사람에게 시킬 예정

---

#### 질문 3: 페이지네이션 기본값
**선택한 옵션:**
<!-- 예: 20개, 10개, 15개 등 -->
페이지네이션은 없이, 무한스크롤로 하고, 정렬은 최신시간순으로 정렬하자.

---

#### 질문 4: 다크모드 색상 팔레트
**선택한 옵션:**
<!-- 기존 피그마 기반 / 기본 팔레트 사용 / 직접 정의 -->
기존 피그마 디자인을 기반으로 하자.

---

### 추가 결정 사항

#### 결정 사항 1: i18n 번역 파일 구조
**결정:**
<!-- 기능별 분리 / 페이지별 분리 -->
기능별로 분리하자.

**이유:**
재사용성을 고려한 설계로 구성

---

#### 결정 사항 2: 게시글 내용 최대 길이
**결정:**
<!-- 무제한 / 10,000자 / 기타 -->
옵션B 10000자 제한이고, 게시글 작성시 10000자 제한이라는 표기를 하자. '0/10000' 이런식으로

**이유:**
악용 금지

---

## 11. 답변 기반 업데이트 사항

> **작성 가이드:** 위 답변을 바탕으로 기획서에 추가/변경해야 할 내용을 정리하세요.

### API 명세 확정
<!-- 예: 게시판 접근 권한에 따른 API 인증 요구사항 -->


### 데이터 모델 확정
<!-- 예: content TEXT (최대 10,000자), view_count INTEGER DEFAULT 0 -->


### 비기능 요구사항 확정
<!-- 예: 페이지당 20개 게시글 -->


---

## 12. 다음 단계

### 12.1 권장 액션
1. 위의 "10. 검토 질문에 대한 답변" 섹션을 모두 작성하세요
2. "11. 답변 기반 업데이트 사항"에 확정된 내용을 정리하세요
3. 답변 완료 후 `/finalize-spec ui-enhancement` 명령을 실행하세요
   → 1번(원본) + 2번(검토+답변)을 합쳐 3번(최종 기획서) 생성

### 12.2 예상 추가 작업 시간
- 답변 작성: 15-30분

---

**답변 작성 완료일:**
**작성자:**
**검토 완료 일시:** 2026-01-27
**다음 단계:** `/finalize-spec ui-enhancement` 명령 실행
